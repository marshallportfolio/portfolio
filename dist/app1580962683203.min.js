!function(){"use strict";angular.module("enterpriseApp.dashboards",["ui.router"]).config(["$stateProvider",function(r){r.state("dashboards",{url:"/dashboards",templateUrl:"dashboards/dashboards.html",controller:"DashboardsCtrl",controllerAs:"vm"})}])}();
!function(){"use strict";angular.module("enterpriseApp.reports",["ui.router"]).config(["$stateProvider",function(r){r.state("reports",{url:"/reports",templateUrl:"reports/reports.html",controller:"ReportsCtrl",controllerAs:"vm",name:"reports"})}])}();
!function(){"use strict";angular.module("enterpriseApp.settings",["ui.router"]).config(["$stateProvider",function(t){t.state("settings",{name:"settings",url:"/settings",templateUrl:"settings/settings.html",controller:"SettingsCtrl",controllerAs:"vm"})}])}();
!function(){"use strict";function e(e,n,a){var r=this;r.isLoading=!0,r.showNavMenu=!0,r.showMobileMenu=!1,r.currentMenu="dashboards",r.selectMenuItem=function(e){r.currentMenu=e,r.showMobileMenu=!1};var t=a.$on("$translateChangeEnd",function(){r.isLoading=!1}),s=a.$on("$stateChangeSuccess",function(n,a){e.debug("In stateChangeSuccess loading state:"+a.name),a&&a.name&&(r.currentMenu=a.name)});n.$on("$destroy",function(){t(),s()})}angular.module("enterpriseApp",["ui.router","ngSanitize","pascalprecht.translate","enterpriseApp.dashboards","enterpriseApp.reports","enterpriseApp.settings","enterpriseApp.templates"]).config(["$locationProvider","$translateProvider","$urlRouterProvider",function(e,n,a){e.hashPrefix("!"),a.otherwise("/dashboards"),n.useStaticFilesLoader({prefix:"l10n/",suffix:".json"}).registerAvailableLanguageKeys(["en-US","ja"],{en:"en-US","en_*":"en-US","en-*":"en-US",ja:"ja","ja-*":"ja","ja_*":"ja","*":"en-US"}).determinePreferredLanguage().fallbackLanguage("en-US"),n.useSanitizeValueStrategy("sanitizeParameters")}]).controller("enterpriseAppController",e),e.$inject=["$log","$scope","$rootScope"]}();
!function(){"use strict";function t(t,e,n){function r(t){return n(function(){return t},Math.floor(Math.random()*Math.floor(4e3)))}function a(t){if(angular.isDefined(t))return moment(t,"YYYYMMDD").format("L")}var o="en-US",u={preferredLanguage:o,simulateBackendCall:r,formatDate:a};return u}angular.module("enterpriseApp").factory("appService",t),t.$inject=["$http","$log","$timeout"]}();
!function(){"use strict";function t(t,n){function r(){n.getPieChartData().then(function(t){l.pieChartData=o(t.data),l.pieLoading=!1}),n.getBarChartData().then(function(t){l.barChartData=u(t.data),l.barLoading=!1}),n.getLineChartData().then(function(t){l.lineChartData=i(t.data),l.lineLoading=!1})}function o(t){a(t);for(var n=t.reduce(e,0),r=0,o=0,u=t.length;o<u;o++)t[o].offset=r,t[o].percent=t[o].value/n*100,r+=t[o].percent,t[o].over50=t[o].percent>50?1:0;return t}function u(t){a(t);var n=t.reduce(e,0);t.topMostPoint=t[0].value;for(var r=0,o=t.length;r<o;r++)t[r].percent=t[r].value/n*100;return t}function i(t){function e(t){return t*(180/Math.PI)}var n=200/t.length;a(t);for(var r=t[0].value,o=40,u=0,i=0,l=[],h=0,s=t.length-1;h<s;h++){var v={left:0,bottom:0,hypotenuse:0,angle:0,value:0,item:""};v.value=t[h].value,v.item=t[h].item,v.left=o>0?o-2:o,o+=n,v.bottom=150*(v.value/r),u=150*(t[h+1].value/r),i=v.bottom-u,v.hypotenuse=Math.sqrt(n*n+i*i),v.angle=e(Math.asin(i/v.hypotenuse)),l.push(v)}var c={left:o-2,bottom:150*(t[t.length-1].value/r),hypotenuse:0,angle:0,value:t[t.length-1].value,item:t[t.length-1].item};return l.push(c),l.topMostPoint=r,l}var l=this;l.title="dashboards",l.pieLoading=!0,l.barLoading=!0,l.lineLoading=!0,l.startDate=moment().subtract(6,"days").format("YYYYMMDD"),l.endDate=moment().format("YYYYMMDD"),l.pieChartData,l.barChartData,l.lineChartData,l.formatDate=t.formatDate,r()}function a(t){t.sort(function(t,a){return a.value-t.value})}function e(t,a){return t+a.value}angular.module("enterpriseApp.dashboards").controller("DashboardsCtrl",t),t.$inject=["appService","dashboardsService"]}();
!function(){"use strict";function t(t,a,e){function n(){return e.simulateBackendCall({data:i}).then(s)}function r(){return e.simulateBackendCall({data:i}).then(s)}function u(){return e.simulateBackendCall({data:i}).then(s)}function s(t){return t.data}var c={getPieChartData:n,getBarChartData:r,getLineChartData:u},i={startDate:moment().subtract(6,"days").format("YYYYMMDD"),endDate:moment().format("YYYYMMDD"),data:[{item:"black socks",type:"NUMBER",value:60},{item:"blue socks",type:"NUMBER",value:5},{item:"red socks",type:"NUMBER",value:15},{item:"new socks",type:"NUMBER",value:20}]};return c}angular.module("enterpriseApp.dashboards").factory("dashboardsService",t),t.$inject=["$http","$log","appService"]}();
!function(){"use strict";function t(t,r){function e(){r.getReportData().then(function(t){o.reportData=t,o.loading=!1})}var o=this;o.title="reports",o.loading=!0,o.reportData={},o.formatDate=t.formatDate,e()}angular.module("enterpriseApp.reports").controller("ReportsCtrl",t),t.$inject=["appService","reportsService"]}();
!function(){"use strict";function t(t,d,a){function u(){function t(t){return t.data}var d=[{date:20200101,id:1001,product:"black socks",quantity:200},{date:20200101,id:1002,product:"blue socks",quantity:500},{date:20200102,id:1011,product:"red socks",quantity:20},{date:20200102,id:1012,product:"plaid socks",quantity:30},{date:20200103,id:1013,product:"argyle socks",quantity:40},{date:20200101,id:1001,product:"black socks",quantity:200},{date:20200101,id:1002,product:"blue socks",quantity:500},{date:20200102,id:1011,product:"red socks",quantity:20},{date:20200102,id:1012,product:"plaid socks",quantity:30},{date:20200103,id:1013,product:"argyle socks",quantity:40},{date:20200101,id:1001,product:"black socks",quantity:200},{date:20200101,id:1002,product:"blue socks",quantity:500},{date:20200102,id:1011,product:"red socks",quantity:20},{date:20200102,id:1012,product:"plaid socks",quantity:30},{date:20200103,id:1013,product:"argyle socks",quantity:40},{date:20200101,id:1001,product:"black socks",quantity:200},{date:20200101,id:1002,product:"blue socks",quantity:500},{date:20200102,id:1011,product:"red socks",quantity:20},{date:20200102,id:1012,product:"plaid socks",quantity:30},{date:20200103,id:1013,product:"argyle socks",quantity:40},{date:20200101,id:1001,product:"black socks",quantity:200},{date:20200101,id:1002,product:"blue socks",quantity:500},{date:20200102,id:1011,product:"red socks",quantity:20},{date:20200102,id:1012,product:"plaid socks",quantity:30},{date:20200103,id:1013,product:"argyle socks",quantity:40},{date:20200101,id:1001,product:"black socks",quantity:200},{date:20200101,id:1002,product:"blue socks",quantity:500},{date:20200102,id:1011,product:"red socks",quantity:20},{date:20200102,id:1012,product:"plaid socks",quantity:30},{date:20200103,id:1013,product:"argyle socks",quantity:40},{date:20200101,id:1001,product:"black socks",quantity:200},{date:20200101,id:1002,product:"blue socks",quantity:500},{date:20200102,id:1011,product:"red socks",quantity:20},{date:20200102,id:1012,product:"plaid socks",quantity:30},{date:20200103,id:1013,product:"argyle socks",quantity:40},{date:20200101,id:1001,product:"black socks",quantity:200},{date:20200101,id:1002,product:"blue socks",quantity:500},{date:20200102,id:1011,product:"red socks",quantity:20},{date:20200102,id:1012,product:"plaid socks",quantity:30},{date:20200103,id:1013,product:"argyle socks",quantity:40},{date:20200101,id:1001,product:"black socks",quantity:200},{date:20200101,id:1002,product:"blue socks",quantity:500},{date:20200102,id:1011,product:"red socks",quantity:20},{date:20200102,id:1012,product:"plaid socks",quantity:30},{date:20200103,id:1013,product:"argyle socks",quantity:40},{date:20200101,id:1001,product:"black socks",quantity:200},{date:20200101,id:1002,product:"blue socks",quantity:500},{date:20200102,id:1011,product:"red socks",quantity:20},{date:20200102,id:1012,product:"plaid socks",quantity:30},{date:20200103,id:1013,product:"argyle socks",quantity:40},{date:20200101,id:1001,product:"black socks",quantity:200},{date:20200101,id:1002,product:"blue socks",quantity:500},{date:20200102,id:1011,product:"red socks",quantity:20},{date:20200102,id:1012,product:"plaid socks",quantity:30},{date:20200103,id:1013,product:"argyle socks",quantity:40}];return a.simulateBackendCall({data:d}).then(t)}var c={getReportData:u};return c}angular.module("enterpriseApp.reports").factory("reportsService",t),t.$inject=["$http","$log","appService"]}();
!function(){"use strict";function e(e,n,a){var t=this;t.lang=a.preferredLanguage,t.title="settings",t.changeLanguageAndLocale=function(){a.preferredLanguage=t.lang,moment.locale(t.lang),n.use(t.lang),e.$broadcast("languageChange")}}angular.module("enterpriseApp.settings").controller("SettingsCtrl",e),e.$inject=["$rootScope","$translate","appService"]}();
!function(){"use strict";angular.module("enterpriseApp").directive("spinner",[function(){return{restrict:"EA",templateUrl:"framework/shared/spinner/spinner.html",scope:{small:"@?"}}}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhc2hib2FyZHMvZGFzaGJvYXJkcy5tb2R1bGUuanMiLCJyZXBvcnRzL3JlcG9ydHMubW9kdWxlLmpzIiwic2V0dGluZ3Mvc2V0dGluZ3MubW9kdWxlLmpzIiwiYXBwLmpzIiwiYXBwLnNlcnZpY2UuanMiLCJkYXNoYm9hcmRzL2Rhc2hib2FyZHMuY29udHJvbGxlci5qcyIsImRhc2hib2FyZHMvZGFzaGJvYXJkcy5zZXJ2aWNlLmpzIiwicmVwb3J0cy9yZXBvcnRzLmNvbnRyb2xsZXIuanMiLCJyZXBvcnRzL3JlcG9ydHMuc2VydmljZS5qcyIsInNldHRpbmdzL3NldHRpbmdzLmNvbnRyb2xsZXIuanMiLCJmcmFtZXdvcmsvc2hhcmVkL3NwaW5uZXIvc3Bpbm5lci5kaXJlY3RpdmUuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJuYW1lIiwiZW50ZXJwcmlzZUFwcENvbnRyb2xsZXIiLCIkbG9nIiwiJHNjb3BlIiwiJHJvb3RTY29wZSIsInZtIiwidGhpcyIsImlzTG9hZGluZyIsInNob3dOYXZNZW51Iiwic2hvd01vYmlsZU1lbnUiLCJjdXJyZW50TWVudSIsInNlbGVjdE1lbnVJdGVtIiwibWVudU5hbWUiLCJ0cmFuc2xhdGlvbkxpc3RlbmVyIiwiJG9uIiwicm91dGVMaXN0ZW5lciIsImV2ZW50IiwidG9TdGF0ZSIsImRlYnVnIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkdHJhbnNsYXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJoYXNoUHJlZml4Iiwib3RoZXJ3aXNlIiwidXNlU3RhdGljRmlsZXNMb2FkZXIiLCJwcmVmaXgiLCJzdWZmaXgiLCJyZWdpc3RlckF2YWlsYWJsZUxhbmd1YWdlS2V5cyIsImVuIiwiZW5fKiIsImVuLSoiLCJqYSIsImphLSoiLCJqYV8qIiwiKiIsImRldGVybWluZVByZWZlcnJlZExhbmd1YWdlIiwiZmFsbGJhY2tMYW5ndWFnZSIsInVzZVNhbml0aXplVmFsdWVTdHJhdGVneSIsIiRpbmplY3QiLCJhcHBTZXJ2aWNlIiwiJGh0dHAiLCIkdGltZW91dCIsInNpbXVsYXRlQmFja2VuZENhbGwiLCJkYXRhIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiZm9ybWF0RGF0ZSIsImRhdGUiLCJpc0RlZmluZWQiLCJtb21lbnQiLCJmb3JtYXQiLCJwcmVmZXJyZWRMYW5ndWFnZSIsInNlcnZpY2UiLCJmYWN0b3J5IiwiRGFzaGJvYXJkc0N0cmwiLCJkYXNoYm9hcmRzU2VydmljZSIsImluaXQiLCJnZXRQaWVDaGFydERhdGEiLCJ0aGVuIiwicGllQ2hhcnREYXRhIiwiZm9ybWF0UGllQ2hhcnREYXRhIiwicGllTG9hZGluZyIsImdldEJhckNoYXJ0RGF0YSIsImJhckNoYXJ0RGF0YSIsImZvcm1hdEJhckNoYXJ0RGF0YSIsImJhckxvYWRpbmciLCJnZXRMaW5lQ2hhcnREYXRhIiwibGluZUNoYXJ0RGF0YSIsImZvcm1hdExpbmVDaGFydERhdGEiLCJsaW5lTG9hZGluZyIsInZhbHVlcyIsInNvcnRWYWx1ZXMiLCJ0b3RhbCIsInJlZHVjZSIsInN1bSIsIm9mZnNldCIsImkiLCJsZW4iLCJsZW5ndGgiLCJwZXJjZW50IiwidmFsdWUiLCJvdmVyNTAiLCJ0b3BNb3N0UG9pbnQiLCJyYWRpYW5zVG9EZWdyZWVzIiwicmFkcyIsIlBJIiwiYmFzZSIsImxlZnRPZmZzZXQiLCJuZXh0UG9pbnQiLCJyaXNlIiwiY3NzVmFsdWVzIiwiY3VycmVudFZhbHVlIiwibGVmdCIsImJvdHRvbSIsImh5cG90ZW51c2UiLCJhbmdsZSIsIml0ZW0iLCJzcXJ0IiwiYXNpbiIsInB1c2giLCJsYXN0UG9pbnQiLCJ0aXRsZSIsInN0YXJ0RGF0ZSIsInN1YnRyYWN0IiwiZW5kRGF0ZSIsInNvcnQiLCJhIiwiYiIsInJlcG9ydERhdGEiLCJwcm9jZXNzRGF0YSIsInR5cGUiLCJSZXBvcnRzQ3RybCIsInJlcG9ydHNTZXJ2aWNlIiwiZ2V0UmVwb3J0RGF0YSIsImxvYWRpbmciLCJpZCIsInByb2R1Y3QiLCJxdWFudGl0eSIsIlNldHRpbmdzQ3RybCIsIiR0cmFuc2xhdGUiLCJsYW5nIiwiY2hhbmdlTGFuZ3VhZ2VBbmRMb2NhbGUiLCJsb2NhbGUiLCJ1c2UiLCIkYnJvYWRjYXN0IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJzY29wZSIsInNtYWxsIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNJLFlBRUFBLFNBQ0tDLE9BQU8sNEJBQTZCLGNBRXBDQyxRQUFRLGlCQUFrQixTQUFTQyxHQUNoQ0EsRUFBZUMsTUFBTSxjQUNqQkMsSUFBSyxjQUNMQyxZQUFhLDZCQUNiQyxXQUFZLGlCQUNaQyxhQUFjO0NDWDlCLFdBQ0ksWUFFQVIsU0FDS0MsT0FBTyx5QkFBMEIsY0FFckNDLFFBQVEsaUJBQWtCLFNBQVNDLEdBQ2hDQSxFQUFlQyxNQUFNLFdBQ2pCQyxJQUFLLFdBQ0xDLFlBQWEsdUJBQ2JDLFdBQVksY0FDWkMsYUFBYyxLQUNkQyxLQUFNO0NDWmxCLFdBQ0ksWUFFQVQsU0FDS0MsT0FBTywwQkFBMkIsY0FFdENDLFFBQVEsaUJBQWtCLFNBQVNDLEdBQ2hDQSxFQUFlQyxNQUFNLFlBQ2pCSyxLQUFNLFdBQ05KLElBQUssWUFDTEMsWUFBYSx5QkFDYkMsV0FBWSxlQUNaQyxhQUFjO0NDVjFCLFdBQ0ksWUE2Q0EsU0FBU0UsR0FBd0JDLEVBQU1DLEVBQVFDLEdBQzNDLEdBQUlDLEdBQUtDLElBRVRELEdBQUdFLFdBQVksRUFDZkYsRUFBR0csYUFBYyxFQUNqQkgsRUFBR0ksZ0JBQWlCLEVBRXBCSixFQUFHSyxZQUFjLGFBRWpCTCxFQUFHTSxlQUFpQixTQUFTQyxHQUN6QlAsRUFBR0ssWUFBY0UsRUFDakJQLEVBQUdJLGdCQUFpQixFQUd4QixJQUFJSSxHQUFzQlQsRUFBV1UsSUFBSSxzQkFBdUIsV0FDNURULEVBQUdFLFdBQVksSUFHZlEsRUFBZ0JYLEVBQVdVLElBQUksc0JBQXVCLFNBQVNF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QUdWdEUsS0FBTSxTQUNOb0UsR0FBSSxLQUNKQyxRQUFTLGNBQ1RDLFNBQVUsTUFHVnRFLEtBQU0sU0FDTm9FLEdBQUksS0FDSkMsUUFBUyxhQUNUQyxTQUFVLE1BR1Z0RSxLQUFNLFNBQ05vRSxHQUFJLEtBQ0pDLFFBQVMsWUFDVEMsU0FBVSxLQUdWdEUsS0FBTSxTQUNOb0UsR0FBSSxLQUNKQyxRQUFTLGNBQ1RDLFNBQVUsS0FHVnRFLEtBQU0sU0FDTm9FLEdBQUksS0FDSkMsUUFBUyxlQUNUQyxTQUFVLEtBR1Z0RSxLQUFNLFNBQ05vRSxHQUFJLEtBQ0pDLFFBQVMsY0FDVEMsU0FBVSxNQUdWdEUsS0FBTSxTQUNOb0UsR0FBSSxLQUNKQyxRQUFTLGFBQ1RDLFNBQVUsTUFHVnRFLEtBQU0sU0FDTm9FLEdBQUksS0FDSkMsUUFBUyxZQUNUQyxTQUFVLEtBR1Z0RSxLQUFNLFNBQ05vRSxHQUFJLEtBQ0pDLFFBQVMsY0FDVEMsU0FBVSxLQUdWdEUsS0FBTSxTQUNOb0UsR0FBSSxLQUNKQyxRQUFTLGVBQ1RDLFNBQVUsS0FHVnRFLEtBQU0sU0FDTm9FLEdBQUksS0FDSkMsUUFBUyxjQUNUQyxTQUFVLE1BR1Z0RSxLQUFNLFNBQ05vRSxHQUFJLEtBQ0pDLFFBQVMsYUFDVEMsU0FBVSxNQUdWdEUsS0FBTSxTQUNOb0UsR0FBSSxLQUNKQyxRQUFTLFlBQ1RDLFNBQVUsS0FHVnRFLEtBQU0sU0FDTm9FLEdBQUksS0FDSkMsUUFBUyxjQUNUQyxTQUFVLEtBR1Z0RSxLQUFNLFNBQ05vRSxHQUFJLEtBQ0pDLFFBQVMsZUFDVEMsU0FBVSxLQUdWdEUsS0FBTSxTQUNOb0UsR0FBSSxLQUNKQyxRQUFTLGNBQ1RDLFNBQVUsTUFHVnRFLEtBQU0sU0FDTm9FLEdBQUksS0FDSkMsUUFBUyxhQUNUQyxTQUFVLE1BR1Z0RSxLQUFNLFNBQ05vRSxHQUFJLEtBQ0pDLFFBQVMsWUFDVEMsU0FBVSxLQUdWdEUsS0FBTSxTQUNOb0UsR0FBSSxLQUNKQyxRQUFTLGNBQ1RDLFNBQVUsS0FHVnRFLEtBQU0sU0FDTm9FLEdBQUksS0FDSkMsUUFBUyxlQUNUQyxTQUFVLEtBR1Z0RSxLQUFNLFNBQ05vRSxHQUFJLEtBQ0pDLFFBQVMsY0FDVEMsU0FBVSxNQUdWdEUsS0FBTSxTQUNOb0UsR0FBSSxLQUNKQyxRQUFTLGFBQ1RDLFNBQVUsTUFHVnRFLEtBQU0sU0FDTm9FLEdBQUksS0FDSkMsUUFBUyxZQUNUQyxTQUFVLEtBR1Z0RSxLQUFNLFNBQ05vRSxHQUFJLEtBQ0pDLFFBQVMsY0FDVEMsU0FBVSxLQUdWdEUsS0FBTSxTQUNOb0UsR0FBSSxLQUNKQyxRQUFTLGVBQ1RDLFNBQVUsS0FHVnRFLEtBQU0sU0FDTm9FLEdBQUksS0FDSkMsUUFBUyxjQUNUQyxTQUFVLE1BR1Z0RSxLQUFNLFNBQ05vRSxHQUFJLEtBQ0pDLFFBQVMsYUFDVEMsU0FBVSxNQUdWdEUsS0FBTSxTQUNOb0UsR0FBSSxLQUNKQyxRQUFTLFlBQ1RDLFNBQVUsS0FHVnRFLEtBQU0sU0FDTm9FLEdBQUksS0FDSkMsUUFBUyxjQUNUQyxTQUFVLEtBR1Z0RSxLQUFNLFNBQ05vRSxHQUFJLEtBQ0pDLFFBQVMsZUFDVEMsU0FBVSxLQUdWdEUsS0FBTSxTQUNOb0UsR0FBSSxLQUNKQyxRQUFTLGNBQ1RDLFNBQVUsTUFHVnRFLEtBQU0sU0FDTm9FLEdBQUksS0FDSkMsUUFBUyxhQUNUQyxTQUFVLE1BR1Z0RSxLQUFNLFNBQ05vRSxHQUFJLEtBQ0pDLFFBQVMsWUFDVEMsU0FBVSxLQUdWdEUsS0FBTSxTQUNOb0UsR0FBSSxLQUNKQyxRQUFTLGNBQ1RDLFNBQVUsS0FHVnRFLEtBQU0sU0FDTm9FLEdBQUksS0FDSkMsUUFBUyxlQUNUQyxTQUFVLEtBR1Z0RSxLQUFNLFNBQ05vRSxHQUFJLEtBQ0pDLFFBQVMsY0FDVEMsU0FBVSxNQUdWdEUsS0FBTSxTQUNOb0UsR0FBSSxLQUNKQyxRQUFTLGFBQ1RDLFNBQVUsTUFHVnRFLEtBQU0sU0FDTm9FLEdBQUksS0FDSkMsUUFBUyxZQUNUQyxTQUFVLEtBR1Z0RSxLQUFNLFNBQ05vRSxHQUFJLEtBQ0pDLFFBQVMsY0FDVEMsU0FBVSxLQUdWdEUsS0FBTSxTQUNOb0UsR0FBSSxLQUNKQyxRQUFTLGVBQ1RDLFNBQVUsS0FHVnRFLEtBQU0sU0FDTm9FLEdBQUksS0FDSkMsUUFBUyxjQUNUQyxTQUFVLE1BR1Z0RSxLQUFNLFNBQ05vRSxHQUFJLEtBQ0pDLFFBQVMsYUFDVEMsU0FBVSxNQUdWdEUsS0FBTSxTQUNOb0UsR0FBSSxLQUNKQyxRQUFTLFlBQ1RDLFNBQVUsS0FHVnRFLEtBQU0sU0FDTm9FLEdBQUksS0FDSkMsUUFBUyxjQUNUQyxTQUFVLEtBR1Z0RSxLQUFNLFNBQ05vRSxHQUFJLEtBQ0pDLFFBQVMsZUFDVEMsU0FBVSxJQUlsQixPQUFPL0UsR0FBV0cscUJBQXFCQyxLQUFNa0UsSUFBYWxELEtBQUttRCxHQXBWbkUsR0FBSXpELElBQ0E2RCxjQUFlQSxFQUduQixPQUFPN0QsR0FYWDlELFFBQ0tDLE9BQU8seUJBQ1A4RCxRQUFRLGlCQUFrQjJELEdBRS9CQSxFQUFlM0UsU0FBVyxRQUFTLE9BQVE7Q0NQL0MsV0FDSSxZQU9BLFNBQVNpRixHQUFhbkgsRUFBWW9ILEVBQVlqRixHQUMxQyxHQUFJbEMsR0FBS0MsSUFDVEQsR0FBR29ILEtBQU9sRixFQUFXYSxrQkFDckIvQyxFQUFHaUcsTUFBUSxXQUVYakcsRUFBR3FILHdCQUEwQixXQUN6Qm5GLEVBQVdhLGtCQUFvQi9DLEVBQUdvSCxLQUNsQ3ZFLE9BQU95RSxPQUFPdEgsRUFBR29ILE1BQ2pCRCxFQUFXSSxJQUFJdkgsRUFBR29ILE1BQ2xCckgsRUFBV3lILFdBQVcsbUJBZDlCdEksUUFBUUMsT0FBTywwQkFDZE0sV0FBVyxlQUFnQnlILEdBRTVCQSxFQUFhakYsU0FBVyxhQUFjLGFBQWM7Q0NOeEQsV0FDSSxZQUVBL0MsU0FDS0MsT0FBTyxpQkFDUHNJLFVBQVUsV0FDUCxXQUNJLE9BQ0lDLFNBQVUsS0FDVmxJLFlBQWEsd0NBQ2JtSSxPQUNJQyxNQUFPIiwiZmlsZSI6ImFwcDE1ODA5NjI2ODMyMDMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnZW50ZXJwcmlzZUFwcC5kYXNoYm9hcmRzJywgWyd1aS5yb3V0ZXInXSlcblxuICAgICAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbigkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAgICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2Rhc2hib2FyZHMnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2Rhc2hib2FyZHMnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnZGFzaGJvYXJkcy9kYXNoYm9hcmRzLmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdEYXNoYm9hcmRzQ3RybCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfV0pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2VudGVycHJpc2VBcHAucmVwb3J0cycsIFsndWkucm91dGVyJ10pXG5cbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbigkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgncmVwb3J0cycsIHtcbiAgICAgICAgICAgIHVybDogJy9yZXBvcnRzJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncmVwb3J0cy9yZXBvcnRzLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1JlcG9ydHNDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIG5hbWU6ICdyZXBvcnRzJ1xuICAgICAgICB9KTtcbiAgICB9XSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdlbnRlcnByaXNlQXBwLnNldHRpbmdzJywgWyd1aS5yb3V0ZXInXSlcblxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdzZXR0aW5ncycsIHtcbiAgICAgICAgICAgIG5hbWU6ICdzZXR0aW5ncycsXG4gICAgICAgICAgICB1cmw6ICcvc2V0dGluZ3MnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzZXR0aW5ncy9zZXR0aW5ncy5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdTZXR0aW5nc0N0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgICAgIH0pO1xuICAgIH1dKTtcblxufSkoKTtcbiIsIlxuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gRGVjbGFyZSBhcHAgbGV2ZWwgbW9kdWxlIHdoaWNoIGRlcGVuZHMgb24gdmlld3MsIGFuZCBjb3JlIGNvbXBvbmVudHNcbiAgICBhbmd1bGFyLm1vZHVsZSgnZW50ZXJwcmlzZUFwcCcsIFtcbiAgICAgICAgJ3VpLnJvdXRlcicsXG4gICAgICAgICduZ1Nhbml0aXplJyxcbiAgICAgICAgJ3Bhc2NhbHByZWNodC50cmFuc2xhdGUnLFxuICAgICAgICAnZW50ZXJwcmlzZUFwcC5kYXNoYm9hcmRzJyxcbiAgICAgICAgJ2VudGVycHJpc2VBcHAucmVwb3J0cycsXG4gICAgICAgICdlbnRlcnByaXNlQXBwLnNldHRpbmdzJyxcbiAgICAgICAgJ2VudGVycHJpc2VBcHAudGVtcGxhdGVzJ1xuICAgIF0pXG4gICAgICAgIC5jb25maWcoW1xuICAgICAgICAgICAgJyRsb2NhdGlvblByb3ZpZGVyJywgJyR0cmFuc2xhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLFxuICAgICAgICAgICAgZnVuY3Rpb24oJGxvY2F0aW9uUHJvdmlkZXIsICR0cmFuc2xhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaGFzaFByZWZpeCgnIScpO1xuXG4gICAgICAgICAgICAgICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL2Rhc2hib2FyZHMnKTtcblxuICAgICAgICAgICAgICAgIC8vIENvbmZpZ3VyZSB0cmFuc2xhdGlvbnNcbiAgICAgICAgICAgICAgICAkdHJhbnNsYXRlUHJvdmlkZXJcbiAgICAgICAgICAgICAgICAgICAgLnVzZVN0YXRpY0ZpbGVzTG9hZGVyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2wxMG4vJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1ZmZpeDogJy5qc29uJ1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAucmVnaXN0ZXJBdmFpbGFibGVMYW5ndWFnZUtleXMoWydlbi1VUycsICdqYSddLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnZW4nOiAnZW4tVVMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2VuXyonOiAnZW4tVVMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2VuLSonOiAnZW4tVVMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2phJzogJ2phJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdqYS0qJzogJ2phJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdqYV8qJzogJ2phJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICcqJzogJ2VuLVVTJ1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZGV0ZXJtaW5lUHJlZmVycmVkTGFuZ3VhZ2UoKVxuICAgICAgICAgICAgICAgICAgICAuZmFsbGJhY2tMYW5ndWFnZSgnZW4tVVMnKTtcblxuICAgICAgICAgICAgICAgIC8vIFByb3RlY3QgZnJvbSBpbnNlcnRpb24gYXR0YWNrcyBpbiB0aGUgdHJhbnNsYXRpb24gdmFsdWVzLlxuICAgICAgICAgICAgICAgICR0cmFuc2xhdGVQcm92aWRlci51c2VTYW5pdGl6ZVZhbHVlU3RyYXRlZ3koJ3Nhbml0aXplUGFyYW1ldGVycycpO1xuICAgICAgICAgICAgfVxuICAgICAgICBdKVxuICAgICAgICAuY29udHJvbGxlcignZW50ZXJwcmlzZUFwcENvbnRyb2xsZXInLCBlbnRlcnByaXNlQXBwQ29udHJvbGxlcik7XG5cbiAgICBlbnRlcnByaXNlQXBwQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRzY29wZScsICckcm9vdFNjb3BlJ107XG5cbiAgICBmdW5jdGlvbiBlbnRlcnByaXNlQXBwQ29udHJvbGxlcigkbG9nLCAkc2NvcGUsICRyb290U2NvcGUpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICB2bS5zaG93TmF2TWVudSA9IHRydWU7XG4gICAgICAgIHZtLnNob3dNb2JpbGVNZW51ID0gZmFsc2U7XG5cbiAgICAgICAgdm0uY3VycmVudE1lbnUgPSAnZGFzaGJvYXJkcyc7XG5cbiAgICAgICAgdm0uc2VsZWN0TWVudUl0ZW0gPSBmdW5jdGlvbihtZW51TmFtZSkge1xuICAgICAgICAgICAgdm0uY3VycmVudE1lbnUgPSBtZW51TmFtZTtcbiAgICAgICAgICAgIHZtLnNob3dNb2JpbGVNZW51ID0gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHRyYW5zbGF0aW9uTGlzdGVuZXIgPSAkcm9vdFNjb3BlLiRvbignJHRyYW5zbGF0ZUNoYW5nZUVuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdm0uaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciByb3V0ZUxpc3RlbmVyID0gJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbihldmVudCwgdG9TdGF0ZSkge1xuICAgICAgICAgICAgJGxvZy5kZWJ1ZygnSW4gc3RhdGVDaGFuZ2VTdWNjZXNzIGxvYWRpbmcgc3RhdGU6JyArIHRvU3RhdGUubmFtZSk7XG4gICAgICAgICAgICBpZiAodG9TdGF0ZSAmJiB0b1N0YXRlLm5hbWUpIHtcbiAgICAgICAgICAgICAgICB2bS5jdXJyZW50TWVudSA9IHRvU3RhdGUubmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRyYW5zbGF0aW9uTGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHJvdXRlTGlzdGVuZXIoKTtcbiAgICAgICAgfSk7XG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2VudGVycHJpc2VBcHAnKVxuICAgICAgICAuZmFjdG9yeSgnYXBwU2VydmljZScsIGFwcFNlcnZpY2UpO1xuXG4gICAgYXBwU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9nJywgJyR0aW1lb3V0J107XG5cbiAgICBmdW5jdGlvbiBhcHBTZXJ2aWNlKCRodHRwLCAkbG9nLCAkdGltZW91dCkge1xuXG4gICAgICAgIHZhciBwcmVmZXJyZWRMYW5ndWFnZSA9ICdlbi1VUyc7XG5cbiAgICAgICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICAgICAgICBwcmVmZXJyZWRMYW5ndWFnZTogcHJlZmVycmVkTGFuZ3VhZ2UsXG4gICAgICAgICAgICBzaW11bGF0ZUJhY2tlbmRDYWxsOiBzaW11bGF0ZUJhY2tlbmRDYWxsLFxuICAgICAgICAgICAgZm9ybWF0RGF0ZTogZm9ybWF0RGF0ZVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgICAgIGZ1bmN0aW9uIHNpbXVsYXRlQmFja2VuZENhbGwoZGF0YSkge1xuICAgICAgICAgICAgLy9TaW5jZSB0aGlzIHNhbXBsZSBhcHAgaXMgZGVzaWduZWQgdG8gcnVuIG9uIGEgR2l0SHViIFBhZ2UsIGl0IGhhcyBubyBiYWNrZW5kIHRvIG1ha2UgY2FsbHMgdG8uXG4gICAgICAgICAgICAvL1dlIHN0aWxsIHdhbnQgdGhlIGFwcCB0byBoYW5kbGUgYXN5bmNocm9ub3VzIGNhbGxzIGFuZCBkZWFsIHdpdGggdGhlIGRlbGF5cyBhbmQgc3VjaCB0aGF0IHJlbW90ZVxuICAgICAgICAgICAgLy9jYWxscyBpbnRyb2R1Y2UsIHNvIHdlJ2xsIHNpbXVsYXRlIGNhbGxzIHRvIHRoZSBiYWNrZW5kIHdpdGggYSB0aW1lb3V0IGZ1bmN0aW9uIHRoYXQgZGVsYXlzIHVwIHRvIGEgZmV3XG4gICAgICAgICAgICAvL3NlY29uZHMgYmVmb3JlIHJlc29sdmluZyBhIHByb21pc2UuXG4gICAgICAgICAgICByZXR1cm4gJHRpbWVvdXQoZnVuY3Rpb24oKSB7IHJldHVybiBkYXRhOyB9LCBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBNYXRoLmZsb29yKDQwMDApKSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUpIHtcbiAgICAgICAgICAgIGlmICghYW5ndWxhci5pc0RlZmluZWQoZGF0ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbW9tZW50KGRhdGUsICdZWVlZTU1ERCcpLmZvcm1hdCgnTCcpO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnZW50ZXJwcmlzZUFwcC5kYXNoYm9hcmRzJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0Rhc2hib2FyZHNDdHJsJywgRGFzaGJvYXJkc0N0cmwpO1xuXG4gICAgRGFzaGJvYXJkc0N0cmwuJGluamVjdCA9IFsnYXBwU2VydmljZScsICdkYXNoYm9hcmRzU2VydmljZSddO1xuXG4gICAgZnVuY3Rpb24gRGFzaGJvYXJkc0N0cmwoYXBwU2VydmljZSwgZGFzaGJvYXJkc1NlcnZpY2UpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0udGl0bGUgPSAnZGFzaGJvYXJkcyc7XG5cbiAgICAgICAgdm0ucGllTG9hZGluZyA9IHRydWU7XG4gICAgICAgIHZtLmJhckxvYWRpbmcgPSB0cnVlO1xuICAgICAgICB2bS5saW5lTG9hZGluZyA9IHRydWU7XG5cbiAgICAgICAgdm0uc3RhcnREYXRlID0gbW9tZW50KCkuc3VidHJhY3QoNiwgJ2RheXMnKS5mb3JtYXQoJ1lZWVlNTUREJyk7XG4gICAgICAgIHZtLmVuZERhdGUgPSBtb21lbnQoKS5mb3JtYXQoJ1lZWVlNTUREJyk7XG5cbiAgICAgICAgdm0ucGllQ2hhcnREYXRhO1xuICAgICAgICB2bS5iYXJDaGFydERhdGE7XG4gICAgICAgIHZtLmxpbmVDaGFydERhdGE7XG5cbiAgICAgICAgdm0uZm9ybWF0RGF0ZSA9IGFwcFNlcnZpY2UuZm9ybWF0RGF0ZTtcblxuICAgICAgICBpbml0KCk7XG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgICAgIGRhc2hib2FyZHNTZXJ2aWNlLmdldFBpZUNoYXJ0RGF0YSgpLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHZtLnBpZUNoYXJ0RGF0YSA9IGZvcm1hdFBpZUNoYXJ0RGF0YShkYXRhLmRhdGEpO1xuICAgICAgICAgICAgICAgIHZtLnBpZUxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBkYXNoYm9hcmRzU2VydmljZS5nZXRCYXJDaGFydERhdGEoKS50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2bS5iYXJDaGFydERhdGEgPSBmb3JtYXRCYXJDaGFydERhdGEoZGF0YS5kYXRhKTtcbiAgICAgICAgICAgICAgICB2bS5iYXJMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZGFzaGJvYXJkc1NlcnZpY2UuZ2V0TGluZUNoYXJ0RGF0YSgpLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHZtLmxpbmVDaGFydERhdGEgPSBmb3JtYXRMaW5lQ2hhcnREYXRhKGRhdGEuZGF0YSk7XG4gICAgICAgICAgICAgICAgdm0ubGluZUxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZm9ybWF0UGllQ2hhcnREYXRhKHZhbHVlcykge1xuICAgICAgICAgICAgc29ydFZhbHVlcyh2YWx1ZXMpO1xuXG4gICAgICAgICAgICB2YXIgdG90YWwgPSB2YWx1ZXMucmVkdWNlKHN1bSwgMCk7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gMDtcblxuICAgICAgICAgICAgZm9yICh2YXIgaT0wLCBsZW49dmFsdWVzLmxlbmd0aDsgaTxsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhbHVlc1tpXS5vZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgICAgICAgICAgdmFsdWVzW2ldLnBlcmNlbnQgPSB2YWx1ZXNbaV0udmFsdWUgLyB0b3RhbCAqIDEwMDtcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gdmFsdWVzW2ldLnBlcmNlbnQ7XG4gICAgICAgICAgICAgICAgdmFsdWVzW2ldLm92ZXI1MCA9IHZhbHVlc1tpXS5wZXJjZW50ID4gNTAgPyAxIDogMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGZvcm1hdEJhckNoYXJ0RGF0YSh2YWx1ZXMpIHtcbiAgICAgICAgICAgIHNvcnRWYWx1ZXModmFsdWVzKTtcblxuICAgICAgICAgICAgdmFyIHRvdGFsID0gdmFsdWVzLnJlZHVjZShzdW0sIDApO1xuICAgICAgICAgICAgdmFsdWVzLnRvcE1vc3RQb2ludCA9IHZhbHVlc1swXS52YWx1ZTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaT0wLCBsZW49dmFsdWVzLmxlbmd0aDsgaTxsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhbHVlc1tpXS5wZXJjZW50ID0gdmFsdWVzW2ldLnZhbHVlIC8gdG90YWwgKiAxMDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBmb3JtYXRMaW5lQ2hhcnREYXRhKHZhbHVlcykge1xuXG4gICAgICAgICAgICAvL2RpdmlkZSAyMDBweCBieSB0b3RhbCBudW1iZXIgb2YgcG9pbnRzIHRvIGdldCBsZW5ndGggb2YgdHJpYW5nbGUgYmFzZS4gVGhhdCBiZWNvbWVzIHRoZSBsZWZ0IG9mZnNldCBmb3IgZWFjaCBuZXcgcG9pbnRcbiAgICAgICAgICAgIC8vc3VidHJhY3QgcHJldmlvdXMgcG9pbnQgaGVpZ2h0IGZyb20gbmV3IHBvaW50IGhlaWdodCB0byBnZXQgdGhlIHJpc2Ugb2YgdGhlIHRyaWFuZ2xlLiBUaGF0IGJlY29tZXMgdGhlIGJvdHRvbSBvZmZzZXQgZm9yIHRoZSBuZXcgcG9pbnQuXG4gICAgICAgICAgICAvL3VzZSBiYXNlIHNxdWFyZWQgKyByaXNlIHNxdWFyZWQgdG8gZmluZCB0aGUgbGVuZ3RoIG9mIHRoZSBoeXBvdGVudXNlLiBUaGF0IGJlY29tZXMgdGhlIHdpZHRoIG9mIHRoZSBsaW5lIHRvIGRyYXcuXG4gICAgICAgICAgICAvL3VzZSBNYXRoLmFzaW4oYmFzZSAvIGh5cG90ZW51c2UpIFt0aGVuIGNvbnZlcnQgdGhlIHJhZGlhbnMgdG8gZGVncmVlc10gdG8gZmluZCB0aGUgZGVncmVlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbGluZSB0by5cbiAgICAgICAgICAgIC8vTXVsdGlwbHkgdGhlIHJvdGF0aW9uIGFuZ2xlIGJ5IC0xIGlmIGl0IG5lZWRzIHRvIHJpc2UgdG8gbWVldCB0aGUgbmV4dCBwb2ludC5cblxuICAgICAgICAgICAgdmFyIGJhc2UgPSAyMDAgLyB2YWx1ZXMubGVuZ3RoO1xuXG4gICAgICAgICAgICBzb3J0VmFsdWVzKHZhbHVlcyk7XG5cbiAgICAgICAgICAgIHZhciB0b3BNb3N0UG9pbnQgPSB2YWx1ZXNbMF0udmFsdWU7XG4gICAgICAgICAgICB2YXIgbGVmdE9mZnNldCA9IDQwOyAvL3BhZGRpbmcgZm9yIGxlZnQgYXhpcyBsYWJlbHNcbiAgICAgICAgICAgIHZhciBuZXh0UG9pbnQgPSAwO1xuICAgICAgICAgICAgdmFyIHJpc2UgPSAwO1xuICAgICAgICAgICAgdmFyIGNzc1ZhbHVlcyA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpPTAsIGxlbj12YWx1ZXMubGVuZ3RoLTE7IGk8bGVuOyBpKyspIHtcblxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgICAgICAgICAgICAgaHlwb3RlbnVzZTogMCxcbiAgICAgICAgICAgICAgICAgICAgYW5nbGU6IDAsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgICAgICAgICBpdGVtOiAnJ1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUudmFsdWUgPSB2YWx1ZXNbaV0udmFsdWU7XG4gICAgICAgICAgICAgICAgY3VycmVudFZhbHVlLml0ZW0gPSB2YWx1ZXNbaV0uaXRlbTtcblxuICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZS5sZWZ0ID0gbGVmdE9mZnNldCA+IDAgPyBsZWZ0T2Zmc2V0IC0gMiA6IGxlZnRPZmZzZXQ7IC8vYWRqdXN0IGZvciBib3JkZXJcbiAgICAgICAgICAgICAgICBsZWZ0T2Zmc2V0ICs9IGJhc2U7XG5cbiAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUuYm90dG9tID0gMTUwICogKGN1cnJlbnRWYWx1ZS52YWx1ZSAvIHRvcE1vc3RQb2ludCk7XG4gICAgICAgICAgICAgICAgbmV4dFBvaW50ID0gMTUwICogKHZhbHVlc1tpKzFdLnZhbHVlIC8gdG9wTW9zdFBvaW50KTtcblxuICAgICAgICAgICAgICAgIHJpc2UgPSBjdXJyZW50VmFsdWUuYm90dG9tIC0gbmV4dFBvaW50O1xuICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZS5oeXBvdGVudXNlID0gTWF0aC5zcXJ0KChiYXNlICogYmFzZSkgKyAocmlzZSAqIHJpc2UpKTtcbiAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUuYW5nbGUgPSByYWRpYW5zVG9EZWdyZWVzKE1hdGguYXNpbihyaXNlIC8gY3VycmVudFZhbHVlLmh5cG90ZW51c2UpKTtcblxuICAgICAgICAgICAgICAgIGNzc1ZhbHVlcy5wdXNoKGN1cnJlbnRWYWx1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBsYXN0UG9pbnQgPSB7XG4gICAgICAgICAgICAgICAgbGVmdDogbGVmdE9mZnNldCAtIDIsXG4gICAgICAgICAgICAgICAgYm90dG9tOiAxNTAgKiAodmFsdWVzW3ZhbHVlcy5sZW5ndGggLSAxXS52YWx1ZSAvIHRvcE1vc3RQb2ludCksXG4gICAgICAgICAgICAgICAgaHlwb3RlbnVzZTogMCxcbiAgICAgICAgICAgICAgICBhbmdsZTogMCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVzW3ZhbHVlcy5sZW5ndGggLSAxXS52YWx1ZSxcbiAgICAgICAgICAgICAgICBpdGVtOiB2YWx1ZXNbdmFsdWVzLmxlbmd0aCAtIDFdLml0ZW1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNzc1ZhbHVlcy5wdXNoKGxhc3RQb2ludCk7XG4gICAgICAgICAgICBjc3NWYWx1ZXMudG9wTW9zdFBvaW50ID0gdG9wTW9zdFBvaW50O1xuXG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJhZGlhbnNUb0RlZ3JlZXMocmFkcykge1xuICAgICAgICAgICAgICAgIHJldHVybiByYWRzICogKDE4MCAvIE1hdGguUEkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gY3NzVmFsdWVzO1xuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gc29ydFZhbHVlcyh2YWx1ZXMpIHtcbiAgICAgICAgdmFsdWVzLnNvcnQoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYi52YWx1ZSAtIGEudmFsdWU7IH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN1bSh0b3RhbCwgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRvdGFsICsgdmFsdWUudmFsdWU7XG4gICAgfVxuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnZW50ZXJwcmlzZUFwcC5kYXNoYm9hcmRzJylcbiAgICAgICAgLmZhY3RvcnkoJ2Rhc2hib2FyZHNTZXJ2aWNlJywgZGFzaGJvYXJkc1NlcnZpY2UpO1xuXG4gICAgZGFzaGJvYXJkc1NlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnLCAnJGxvZycsICdhcHBTZXJ2aWNlJ107XG5cbiAgICBmdW5jdGlvbiBkYXNoYm9hcmRzU2VydmljZSgkaHR0cCwgJGxvZywgYXBwU2VydmljZSkge1xuICAgICAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgICAgICAgIGdldFBpZUNoYXJ0RGF0YTogZ2V0UGllQ2hhcnREYXRhLFxuICAgICAgICAgICAgZ2V0QmFyQ2hhcnREYXRhOiBnZXRCYXJDaGFydERhdGEsXG4gICAgICAgICAgICBnZXRMaW5lQ2hhcnREYXRhOiBnZXRMaW5lQ2hhcnREYXRhXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHJlcG9ydERhdGEgPSB7XG4gICAgICAgICAgICBzdGFydERhdGU6IG1vbWVudCgpLnN1YnRyYWN0KDYsICdkYXlzJykuZm9ybWF0KCdZWVlZTU1ERCcpLFxuICAgICAgICAgICAgZW5kRGF0ZTogbW9tZW50KCkuZm9ybWF0KCdZWVlZTU1ERCcpLFxuICAgICAgICAgICAgZGF0YTogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbTogJ2JsYWNrIHNvY2tzJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ05VTUJFUicsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiA2MFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpdGVtOiAnYmx1ZSBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdOVU1CRVInLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogNVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpdGVtOiAncmVkIHNvY2tzJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ05VTUJFUicsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAxNVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpdGVtOiAnbmV3IHNvY2tzJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ05VTUJFUicsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAyMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gc2VydmljZTtcblxuICAgICAgICBmdW5jdGlvbiBnZXRQaWVDaGFydERhdGEoKSB7XG5cbiAgICAgICAgICAgIHJldHVybiBhcHBTZXJ2aWNlLnNpbXVsYXRlQmFja2VuZENhbGwoe2RhdGE6IHJlcG9ydERhdGF9KS50aGVuKHByb2Nlc3NEYXRhKTtcblxuICAgICAgICAgICAgLy8gcmV0dXJuICRodHRwLmdldCgnL2FwaS9kYXRhL3BpZScpXG4gICAgICAgICAgICAvLyAgICAgLnRoZW4ocHJvY2Vzc0RhdGEpXG4gICAgICAgICAgICAvLyAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgICRsb2cuZXJyb3IoJ2dldCBkYXRhIGNhbGwgZmFpbGVkOiAnICsgZXJyb3IpO1xuICAgICAgICAgICAgLy8gICAgICAgICAvL3Bvc3NpYmx5IGhhbmRsZSBlcnJvciBieSByZWRpcmVjdGluZyB0byBsb2dpbiBvciBtYWluIHNjcmVlblxuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vICk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRCYXJDaGFydERhdGEoKSB7XG5cbiAgICAgICAgICAgIHJldHVybiBhcHBTZXJ2aWNlLnNpbXVsYXRlQmFja2VuZENhbGwoe2RhdGE6IHJlcG9ydERhdGF9KS50aGVuKHByb2Nlc3NEYXRhKTtcblxuICAgICAgICAgICAgLy8gcmV0dXJuICRodHRwLmdldCgnL2FwaS9kYXRhL2JhcicpXG4gICAgICAgICAgICAvLyAgICAgLnRoZW4ocHJvY2Vzc0RhdGEpXG4gICAgICAgICAgICAvLyAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgICRsb2cuZXJyb3IoJ2dldCBkYXRhIGNhbGwgZmFpbGVkOiAnICsgZXJyb3IpO1xuICAgICAgICAgICAgLy8gICAgICAgICAvL3Bvc3NpYmx5IGhhbmRsZSBlcnJvciBieSByZWRpcmVjdGluZyB0byBsb2dpbiBvciBtYWluIHNjcmVlblxuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vICk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRMaW5lQ2hhcnREYXRhKCkge1xuXG4gICAgICAgICAgICByZXR1cm4gYXBwU2VydmljZS5zaW11bGF0ZUJhY2tlbmRDYWxsKHtkYXRhOiByZXBvcnREYXRhfSkudGhlbihwcm9jZXNzRGF0YSk7XG5cbiAgICAgICAgICAgIC8vIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvZGF0YS9iYXInKVxuICAgICAgICAgICAgLy8gICAgIC50aGVuKHByb2Nlc3NEYXRhKVxuICAgICAgICAgICAgLy8gICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgLy8gICAgICAgICAkbG9nLmVycm9yKCdnZXQgZGF0YSBjYWxsIGZhaWxlZDogJyArIGVycm9yKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgLy9wb3NzaWJseSBoYW5kbGUgZXJyb3IgYnkgcmVkaXJlY3RpbmcgdG8gbG9naW4gb3IgbWFpbiBzY3JlZW5cbiAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAvLyApO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc0RhdGEoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGEuZGF0YTtcbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnZW50ZXJwcmlzZUFwcC5yZXBvcnRzJylcbiAgICAuY29udHJvbGxlcignUmVwb3J0c0N0cmwnLCBSZXBvcnRzQ3RybCk7XG5cbiAgICBSZXBvcnRzQ3RybC4kaW5qZWN0ID0gWydhcHBTZXJ2aWNlJywgJ3JlcG9ydHNTZXJ2aWNlJ107XG5cbiAgICBmdW5jdGlvbiBSZXBvcnRzQ3RybChhcHBTZXJ2aWNlLCByZXBvcnRzU2VydmljZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS50aXRsZSA9ICdyZXBvcnRzJztcblxuICAgICAgICB2bS5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgdm0ucmVwb3J0RGF0YSA9IHt9O1xuICAgICAgICB2bS5mb3JtYXREYXRlID0gYXBwU2VydmljZS5mb3JtYXREYXRlO1xuXG4gICAgICAgIGluaXQoKTtcblxuICAgICAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICAgICAgcmVwb3J0c1NlcnZpY2UuZ2V0UmVwb3J0RGF0YSgpLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHZtLnJlcG9ydERhdGEgPSBkYXRhO1xuICAgICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICB9O1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2VudGVycHJpc2VBcHAucmVwb3J0cycpXG4gICAgICAgIC5mYWN0b3J5KCdyZXBvcnRzU2VydmljZScsIHJlcG9ydHNTZXJ2aWNlKTtcblxuICAgIHJlcG9ydHNTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRsb2cnLCAnYXBwU2VydmljZSddO1xuXG4gICAgZnVuY3Rpb24gcmVwb3J0c1NlcnZpY2UoJGh0dHAsICRsb2csIGFwcFNlcnZpY2UpIHtcbiAgICAgICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICAgICAgICBnZXRSZXBvcnREYXRhOiBnZXRSZXBvcnREYXRhXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0UmVwb3J0RGF0YSgpIHtcbiAgICAgICAgICAgIHZhciByZXBvcnREYXRhID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogMjAyMDAxMDEsXG4gICAgICAgICAgICAgICAgICAgIGlkOiAxMDAxLFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0OiAnYmxhY2sgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMjAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAxLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAwMixcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ2JsdWUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNTAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAyLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAxMSxcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ3JlZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAyMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMixcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTIsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdwbGFpZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAzMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTMsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdhcmd5bGUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogMjAyMDAxMDEsXG4gICAgICAgICAgICAgICAgICAgIGlkOiAxMDAxLFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0OiAnYmxhY2sgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMjAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAxLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAwMixcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ2JsdWUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNTAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAyLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAxMSxcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ3JlZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAyMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMixcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTIsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdwbGFpZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAzMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTMsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdhcmd5bGUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogMjAyMDAxMDEsXG4gICAgICAgICAgICAgICAgICAgIGlkOiAxMDAxLFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0OiAnYmxhY2sgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMjAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAxLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAwMixcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ2JsdWUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNTAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAyLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAxMSxcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ3JlZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAyMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMixcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTIsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdwbGFpZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAzMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTMsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdhcmd5bGUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogMjAyMDAxMDEsXG4gICAgICAgICAgICAgICAgICAgIGlkOiAxMDAxLFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0OiAnYmxhY2sgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMjAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAxLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAwMixcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ2JsdWUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNTAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAyLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAxMSxcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ3JlZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAyMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMixcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTIsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdwbGFpZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAzMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTMsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdhcmd5bGUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogMjAyMDAxMDEsXG4gICAgICAgICAgICAgICAgICAgIGlkOiAxMDAxLFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0OiAnYmxhY2sgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMjAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAxLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAwMixcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ2JsdWUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNTAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAyLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAxMSxcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ3JlZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAyMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMixcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTIsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdwbGFpZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAzMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTMsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdhcmd5bGUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogMjAyMDAxMDEsXG4gICAgICAgICAgICAgICAgICAgIGlkOiAxMDAxLFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0OiAnYmxhY2sgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMjAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAxLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAwMixcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ2JsdWUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNTAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAyLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAxMSxcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ3JlZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAyMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMixcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTIsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdwbGFpZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAzMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTMsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdhcmd5bGUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogMjAyMDAxMDEsXG4gICAgICAgICAgICAgICAgICAgIGlkOiAxMDAxLFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0OiAnYmxhY2sgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMjAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAxLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAwMixcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ2JsdWUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNTAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAyLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAxMSxcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ3JlZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAyMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMixcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTIsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdwbGFpZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAzMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTMsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdhcmd5bGUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogMjAyMDAxMDEsXG4gICAgICAgICAgICAgICAgICAgIGlkOiAxMDAxLFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0OiAnYmxhY2sgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMjAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAxLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAwMixcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ2JsdWUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNTAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAyLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAxMSxcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ3JlZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAyMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMixcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTIsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdwbGFpZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAzMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTMsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdhcmd5bGUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogMjAyMDAxMDEsXG4gICAgICAgICAgICAgICAgICAgIGlkOiAxMDAxLFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0OiAnYmxhY2sgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMjAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAxLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAwMixcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ2JsdWUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNTAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAyLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAxMSxcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ3JlZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAyMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMixcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTIsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdwbGFpZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAzMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTMsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdhcmd5bGUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogMjAyMDAxMDEsXG4gICAgICAgICAgICAgICAgICAgIGlkOiAxMDAxLFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0OiAnYmxhY2sgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMjAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAxLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAwMixcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ2JsdWUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNTAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAyLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAxMSxcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ3JlZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAyMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMixcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTIsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdwbGFpZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAzMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTMsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdhcmd5bGUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogMjAyMDAxMDEsXG4gICAgICAgICAgICAgICAgICAgIGlkOiAxMDAxLFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0OiAnYmxhY2sgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMjAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAxLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAwMixcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ2JsdWUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNTAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IDIwMjAwMTAyLFxuICAgICAgICAgICAgICAgICAgICBpZDogMTAxMSxcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogJ3JlZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAyMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMixcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTIsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdwbGFpZCBzb2NrcycsXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAzMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiAyMDIwMDEwMyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEwMTMsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6ICdhcmd5bGUgc29ja3MnLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogNDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICByZXR1cm4gYXBwU2VydmljZS5zaW11bGF0ZUJhY2tlbmRDYWxsKHtkYXRhOiByZXBvcnREYXRhfSkudGhlbihwcm9jZXNzRGF0YSk7XG5cbiAgICAgICAgICAgIC8vIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcmVwb3J0LWRhdGEnKVxuICAgICAgICAgICAgLy8gICAgIC50aGVuKHByb2Nlc3NEYXRhKVxuICAgICAgICAgICAgLy8gICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgJGxvZy5lcnJvcignZ2V0IGRhdGEgY2FsbCBmYWlsZWQ6ICcgKyBlcnJvcik7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAvL3Bvc3NpYmx5IGhhbmRsZSBlcnJvciBieSByZWRpcmVjdGluZyB0byBsb2dpbiBvciBtYWluIHNjcmVlblxuICAgICAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgICAgICAvLyAgICAgKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc0RhdGEoZGF0YSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdlbnRlcnByaXNlQXBwLnNldHRpbmdzJylcbiAgICAuY29udHJvbGxlcignU2V0dGluZ3NDdHJsJywgU2V0dGluZ3NDdHJsKTtcblxuICAgIFNldHRpbmdzQ3RybC4kaW5qZWN0ID0gWyckcm9vdFNjb3BlJywgJyR0cmFuc2xhdGUnLCAnYXBwU2VydmljZSddO1xuXG4gICAgZnVuY3Rpb24gU2V0dGluZ3NDdHJsKCRyb290U2NvcGUsICR0cmFuc2xhdGUsIGFwcFNlcnZpY2UpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0ubGFuZyA9IGFwcFNlcnZpY2UucHJlZmVycmVkTGFuZ3VhZ2U7XG4gICAgICAgIHZtLnRpdGxlID0gJ3NldHRpbmdzJztcblxuICAgICAgICB2bS5jaGFuZ2VMYW5ndWFnZUFuZExvY2FsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYXBwU2VydmljZS5wcmVmZXJyZWRMYW5ndWFnZSA9IHZtLmxhbmc7XG4gICAgICAgICAgICBtb21lbnQubG9jYWxlKHZtLmxhbmcpO1xuICAgICAgICAgICAgJHRyYW5zbGF0ZS51c2Uodm0ubGFuZyk7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2xhbmd1YWdlQ2hhbmdlJyk7XG4gICAgICAgIH07XG4gICAgfVxuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnZW50ZXJwcmlzZUFwcCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ3NwaW5uZXInLCBbXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICByZXN0cmljdDogJ0VBJyxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdmcmFtZXdvcmsvc2hhcmVkL3NwaW5uZXIvc3Bpbm5lci5odG1sJyxcbiAgICAgICAgICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtYWxsOiAnQD8nXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICBdKTtcbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
